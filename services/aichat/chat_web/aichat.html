<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaiChat</title>
    <link rel="stylesheet" href="aichat.css">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="chat-title">PaiChat</div>
            <div class="header-buttons">
                <button class="history-button" onclick="showHistory()"><svg t="1769048092581" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5540" width="16" height="16"><path d="M673.4848 72.96H324.6592a221.5424 221.5424 0 0 0-221.5424 221.5424v414.1056a221.5424 221.5424 0 0 0 221.5424 221.5424h179.968a278.272 278.272 0 0 1 390.4-394.24V294.5024a221.5424 221.5424 0 0 0-221.5424-221.5424z m-215.04 389.12H288.7168a40.96 40.96 0 1 1 0-81.92h169.472a40.96 40.96 0 1 1 0 81.92z m184.6272-166.1952H288.7168a40.96 40.96 0 0 1 0-81.92h354.0992a40.96 40.96 0 1 1 0 81.92z" fill="#FFFFFF" p-id="5541"></path><path d="M715.7248 537.6A211.0976 211.0976 0 1 0 926.72 748.9024 211.0976 211.0976 0 0 0 715.7248 537.6z m80.1792 262.3488h-92.16a40.96 40.96 0 0 1-40.96-40.96v-94.1056a40.96 40.96 0 1 1 81.92 0v53.3504h51.2a40.96 40.96 0 0 1 0 81.92z" fill="#FFFFFF" p-id="5542"></path><path d="M673.4848 72.96H324.6592a221.5424 221.5424 0 0 0-221.5424 221.5424v414.1056a228.9152 228.9152 0 0 0 1.792 27.9552 524.7488 524.7488 0 0 0 335.0016 49.408 278.272 278.272 0 0 1 379.8016-295.2192 525.5168 525.5168 0 0 0 38.6048-318.3104 221.184 221.184 0 0 0-184.832-99.4816z m-215.04 389.12H288.7168a40.96 40.96 0 1 1 0-81.92h169.472a40.96 40.96 0 1 1 0 81.92z m184.6272-166.1952H288.7168a40.96 40.96 0 0 1 0-81.92h354.0992a40.96 40.96 0 1 1 0 81.92z" fill="#FFFFFF" p-id="5543"></path><path d="M504.6272 748.9024c0 6.8608 0.3584 13.7216 1.024 20.48a524.6976 524.6976 0 0 0 156.9792-82.4832v-21.9648a40.96 40.96 0 0 1 62.7712-34.6624 523.6224 523.6224 0 0 0 62.0032-79.9232 211.2 211.2 0 0 0-282.7776 198.6048z" fill="#FFFFFF" p-id="5544"></path><path d="M324.6592 72.96a221.5424 221.5424 0 0 0-221.5424 221.5424v266.8032a421.376 421.376 0 0 0 586.24-487.7312c-5.12-0.3584-10.5472-0.6144-15.872-0.6144z m133.5296 389.12h-169.472a40.96 40.96 0 1 1 0-81.92h169.472a40.96 40.96 0 1 1 0 81.92z m184.6272-166.1952H288.7168a40.96 40.96 0 0 1 0-81.92h354.0992a40.96 40.96 0 1 1 0 81.92z" fill="#FFFFFF" p-id="5545"></path></svg></button>
                <div class="connection-status" id="connectionStatus">连接中...</div>
                <button id="retryButton" onclick="retryConnection()"><svg t="1769048886116" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6532" width="16" height="16"><path d="M177.72463 124.579938A511.832119 511.832119 0 0 1 931.448609 805.623755L768.071796 511.729753H921.723798a409.465695 409.465695 0 0 0-693.020689-295.429499l-50.978479-91.822683z m669.066946 774.606729A511.832119 511.832119 0 0 1 92.965231 218.040483L256.44441 511.832119H102.792408a409.465695 409.465695 0 0 0 693.020689 295.429499l50.978479 91.925049z" fill="#FFFFFF" p-id="6533"></path></svg></button>
            </div>
        </div>

        <!-- 历史记录弹窗 -->
        <div id="historyModal" class="history-modal">
            <div class="history-modal-content">
                <div class="history-header">
                    <h2 class="history-title">聊天历史记录</h2>
                    <button class="close-button" onclick="hideHistory()">&times;</button>
                </div>
                <div class="history-messages" id="historyMessages"></div>
                <div class="history-actions">
                    <button class="history-action-button secondary" onclick="hideHistory()">关闭</button>
                    <button class="history-action-button primary" onclick="loadHistoryToModal()">刷新记录</button>
                    <button class="history-action-button secondary" id="clearButton" onclick="clearHistory()">清除历史</button>
                </div>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message assistant">
                <div class="message-avatar"><svg t="1768989011593" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33830" width="24" height="24"><path d="M170.666667 0h682.666666a170.666667 170.666667 0 0 1 170.666667 170.666667v682.666666a170.666667 170.666667 0 0 1-170.666667 170.666667H170.666667a170.666667 170.666667 0 0 1-170.666667-170.666667V170.666667A170.666667 170.666667 0 0 1 162.133333 0.213333L170.666667 0z" fill="#0075C2" p-id="33831"></path><path d="M409.429333 573.312a499.498667 499.498667 0 0 1 297.386667-302.592l-36.565333-21.034667-126.293334-72.064a52.565333 52.565333 0 0 0-52.309333 0L365.482667 249.685333 239.530667 321.92A52.48 52.48 0 0 0 213.333333 367.786667v201.088a409.6 409.6 0 0 1 196.266667 4.437333h-0.170667z" fill="#FFFFFF" p-id="33832"></path><path d="M239.530667 701.696l125.952 72.277333 18.261333 10.752a497.365333 497.365333 0 0 1 21.76-199.253333A395.861333 395.861333 0 0 0 213.333333 581.632v74.496a52.437333 52.437333 0 0 0 26.197334 45.568zM433.877333 580.778667c38.784 13.141333 75.392 32 108.586667 55.978666a47.36 47.36 0 0 1 68.608 62.506667c20.778667 23.893333 38.698667 50.090667 53.418667 78.122667l5.632-3.2 125.952-72.277334a52.48 52.48 0 0 0 26.410666-45.568V367.786667a52.522667 52.522667 0 0 0-26.453333-45.482667l-59.818667-34.986667a473.472 473.472 0 0 0-302.336 293.461334z" fill="#FFFFFF" p-id="33833"></path><path d="M570.197333 722.346667a47.402667 47.402667 0 0 1-37.12-76.629334 396.8 396.8 0 0 0-103.253333-53.162666 473.045333 473.045333 0 0 0-18.730667 207.573333l80.469334 46.250667a52.565333 52.565333 0 0 0 52.309333 0l109.696-62.976a394.88 394.88 0 0 0-50.773333-74.197334c-8.789333 8.362667-20.48 13.056-32.597334 13.098667z" fill="#FFFFFF" p-id="33834"></path></svg></div>
                <div class="message-content">你好！我是PaiChat，有什么可以帮助你的吗？</div>
            </div>
        </div>

        <div class="chat-input-container">
            <textarea 
                id="messageInput" 
                placeholder="输入你的问题..."
                rows="1"
                onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendMessage();}"
            ></textarea>
            <div class="image-upload-section">
                <input type="file" id="imageInput" accept="image/*" multiple onchange="handleImageSelection(event)">
                <button id="imageUploadButton" onclick="document.getElementById('imageInput').click()"><svg t="1768990542596" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="50606" width="16" height="16"><path d="M924.604 652.741c-8.657 14.045-19.995 28.969-34.799 42.708C907.114 680.514 915 668.283 915 668.283V814H100V584.302s1.919-3.974 5.316-10.56c-2.923 4.009-5.316 7.276-6.316 9.566V818h826V652.121c0 0.207-0.268 0.413-0.396 0.62z" fill="#6366f1" p-id="50607"></path><path d="M775.368 745.783c-8.774 0.937-17.964 1.441-27.604 1.441-39.155 0-75.216-7.109-107.343-21.134 24.504 13.482 54.804 22.814 91.806 22.814 15.477 0 29.833-1.136 43.141-3.121zM131.466 495.698c24.359-21.467 50.47-38.599 77.807-50.922 34.444-15.525 70.653-23.397 107.72-23.397 66.907 0 127.417 26.807 175.037 77.523 35.605 37.919 51.425 75.721 52.082 77.312l0.312 0.772 0.237 0.8c0.093 0.301 10.913 34.815 41.447 68.596 40.337 44.625 94.725 67.252 161.656 67.252 66.244 0 116.132-26.417 148.243-78.517C918.485 598.647 924 562.194 925 556.373V190H99v338.411c9-10.208 19.688-21.452 32.466-32.713z m584.837-209.863c58.124 0 105.243 47.119 105.243 105.243 0 58.124-47.119 105.243-105.243 105.243-58.124 0-105.243-47.119-105.243-105.243-0.001-58.124 47.118-105.243 105.243-105.243z" fill="#6366f1" p-id="50608"></path><path d="M959 187.913C959 170.288 944.712 156 927.087 156H96.913C79.288 156 65 170.288 65 187.913v631.175C65 836.712 79.288 851 96.913 851h830.175C944.712 851 959 836.712 959 819.087V187.913zM99 818V583.308c1-2.29 3.529-5.557 6.452-9.566 9.37-12.852 25.809-33.312 48.918-53.541 49.445-43.283 104.126-65.23 162.623-65.23 57.831 0 108.201 22.236 149.761 66.091 29.534 31.165 44.095 62.936 46.073 67.43 2.167 6.668 14.95 42.956 47.286 79.213 20.612 23.111 44.966 41.534 72.393 54.758 2.61 1.259 5.25 2.464 7.915 3.627 32.127 14.025 68.187 21.134 107.342 21.134 9.64 0 18.83-0.504 27.604-1.441 51.363-5.487 88.21-26.058 114.37-50.335 14.805-13.739 26.209-28.662 34.866-42.708 0.128-0.207 0.396-0.413 0.396-0.62V818H99z m826-628v366.373c-1 5.821-6.516 42.275-28.993 78.743" fill="#6366f1" p-id="50609"></path></svg> 添加图片</button>
            </div>
            <div class="selected-images" id="selectedImages"></div>
            <div class="all-buttons-container">
                <div class="button-item">
                    <button id="sendButton" onclick="sendMessage()"><svg t="1768989938251" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="42140" width="16" height="16"><path d="M870.599222 165.813828H634.598025v61.299012h193.091888l100.223885 275.845556H665.247531v30.649506a153.247531 153.247531 0 0 1-306.495062 0v-30.649506H96.086202l100.223885-275.845556H389.401975v-61.299012H153.400778L21.607902 528.397486v495.602514h980.784196V528.397486z m70.493864 796.88716H82.906914v-398.44358h216.692008a214.546543 214.546543 0 0 0 424.802156 0H941.093086z" fill="#FFFFFF" p-id="42141"></path><path d="M481.350494 117.387609v416.220293h61.299012V117.387609l39.537863 39.537862 43.522299-43.215803L512 0l-113.709668 113.709668 43.522299 43.215803L481.350494 117.387609z" fill="#FFFFFF" p-id="42142"></path></svg></button>
                </div>
                <div class="button-item">
                    <button id="pauseButton" class="control-button" onclick="controlChat('pause')" disabled><svg t="1768990382030" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="48121" width="16" height="16"><path d="M128 106.858667C128 94.976 137.621333 85.333333 149.12 85.333333h85.76c11.648 0 21.12 9.6 21.12 21.525334V917.12c0 11.882667-9.621333 21.525333-21.12 21.525333H149.12A21.290667 21.290667 0 0 1 128 917.141333V106.88z m640 0c0-11.882667 9.621333-21.525333 21.12-21.525334h85.76c11.648 0 21.12 9.6 21.12 21.525334V917.12c0 11.882667-9.621333 21.525333-21.12 21.525333h-85.76a21.290667 21.290667 0 0 1-21.12-21.525333V106.88z" fill="#6366f1" p-id="48122"></path></svg></button>
                </div>
                <div class="button-item">
                    <button id="continueButton" class="control-button" onclick="controlChat('continue')" disabled><svg t="1768990197687" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="46149" width="16" height="16"><path d="M757.333333 447.125333L363.093333 167.872a83.413333 83.413333 0 0 0-131.626666 68.096v558.464a83.413333 83.413333 0 0 0 131.626666 68.074667L757.333333 583.274667a83.413333 83.413333 0 0 0 0-136.149334z m-38.506666 74.965334a11.925333 11.925333 0 0 1-2.837334 2.837333l-394.218666 279.253333a11.925333 11.925333 0 0 1-18.794667-9.749333V235.968a11.925333 11.925333 0 0 1 18.794667-9.728l394.24 279.253333a11.925333 11.925333 0 0 1 3.904 14.72l-1.066667 1.877334z" fill="#6366f1" p-id="46150"></path></svg></button>
                </div>
                <div class="button-item">
                    <button id="stopButton" class="control-button" onclick="controlChat('stop')" disabled><svg t="1768990234485" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="47127" width="16" height="16"><path d="M128 128m53.333333 0l661.333334 0q53.333333 0 53.333333 53.333333l0 661.333334q0 53.333333-53.333333 53.333333l-661.333334 0q-53.333333 0-53.333333-53.333333l0-661.333334q0-53.333333 53.333333-53.333333Z" fill="#6366f1" p-id="47128"></path></svg></button>
                </div>
            </div>
        </div>
    </div>

    <script src="aichat.js"></script>
</body>
</html>